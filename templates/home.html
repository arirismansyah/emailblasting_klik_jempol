<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>{{title}}</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="../static/assets/img/logo.png" rel="icon">
    <link href="../static/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Jost:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="../static/assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="../static/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="../static/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="../static/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="../static/assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="../static/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="../static/assets/css/style.css" rel="stylesheet">

    <link rel="stylesheet" href="../static/assets/css/richtext.min.css">
    <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">

    <!-- =======================================================
  * Template Name: Arsha - v4.5.0
  * Template URL: https://bootstrapmade.com/arsha-free-bootstrap-html-template-corporate/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

    <!-- ======= Header ======= -->
    <header id="header" class="fixed-top ">
        <div class="container d-flex align-items-center">

            <h1 class="logo me-auto"><a href="/">Klik Jempol</a></h1>
            <!-- Uncomment below if you prefer to use an image logo -->
            <!-- <a href="index.html" class="logo me-auto"><img src="../static/assets/img/logo.png" alt="" class="img-fluid"></a>-->

            <nav id="navbar" class="navbar">
                <ul>
                    <li><a class="nav-link scrollto active" href="#hero">Home</a></li>
                    <li><a class="nav-link scrollto" href="#about">About</a></li>
                    <li><a class="nav-link scrollto" href="#tools">Tools</a></li>
                    <li><a class="nav-link scrollto" href="#team">Team</a></li>
                    <li><a class="nav-link scrollto" href="#contact">Contact</a></li>
                    <li><a class="nav-link scrollto" href="{{url_for('logout')}}">Logout</a></li>
                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav><!-- .navbar -->

        </div>
    </header><!-- End Header -->

    <!-- ======= Hero Section ======= -->
    <section id="hero" class="d-flex align-items-center">

        <div class="container">
            <div class="row">
                <div class="col-lg-6 d-flex flex-column justify-content-center pt-4 pt-lg-0 order-2 order-lg-1"
                    data-aos="fade-up" data-aos-delay="200">
                    <h1>KLIK JEMPOL</h1>
                    <h2>Kinerja Layanan Informasi Terkini dengan Jemput Bola</h2>
                    <h2>BPS Provinsi Sumatera Selatan</h2>
                    <div class="d-flex justify-content-center justify-content-lg-start">
                        <a href="#tools" class="btn-get-started scrollto">Get Started</a>
                        <a href="https://www.youtube.com/watch?v=jDDaplaOz7Q" class="glightbox btn-watch-video"><i
                                class="bi bi-play-circle"></i><span>Watch Video</span></a>
                    </div>
                </div>
                <div class="col-lg-6 order-1 order-lg-2 hero-img" data-aos="zoom-in" data-aos-delay="200">
                    <img src="../static/assets/img/hero-img.png" class="img-fluid animated" alt="">
                </div>
            </div>
        </div>

    </section><!-- End Hero -->

    <main id="main">

        <!-- ======= About Us Section ======= -->
        <section id="about" class="about">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>About Us</h2>
                </div>

                <div class="row content">
                    <div class="col-lg-6 text-justify">
                        <p style="text-align: justify;">
                            <strong>KLIK JEMPOL</strong>
                            merupakan bentuk Inovasi BPS Provinsi Sumatera Selatan untuk meningkatkan kualitas pelayanan
                            dengan memberikan informasi terkini mengenai produk BPS Provinsi Sumatera Selatan kepada
                            para konsumen data.
                        </p>
                        <p>
                            Data/informasi yang akan diterima dari layanan KLIK JEMPOL antara lain:
                        </p>
                        <ul>
                            <li><i class="ri-check-double-line"></i> Softcopy publikasi</li>
                            <li><i class="ri-check-double-line"></i> Tabel data</li>
                            <li><i class="ri-check-double-line"></i> Unsur kegiatan</li>
                            <li><i class="ri-check-double-line"></i> Berita</li>
                            <li><i class="ri-check-double-line"></i> etc.</li>
                        </ul>
                    </div>
                    <div class="col-lg-6 pt-4 pt-lg-0">
                        <p style="text-align: justify;">
                            Untuk menerima layanan KLIK JEMPOL dari kami Bapak/Ibu harus bersedia menerima dan
                            memperoleh secara terus-menerus informasi terkini terkait data statistik, dengan melakukan
                            pendaftaran dengan mengisi form yang disediakan. <strong>Layanan ini tidak dipungut biaya
                                (gratis).</strong>
                        </p>
                        <a href="#tools" class="btn-learn-more">Get Started</a>
                    </div>
                </div>

            </div>
        </section><!-- End About Us Section -->

        <!-- ======= Tools Section ======= -->
        <section id="tools" class="portfolio">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Tools</h2>
                    <p>Berikut ini merupakan tools atau fitur yang dapat digunakan dalam aplikasi Klik Jempol.</p>
                </div>

                <ul class="nav nav-pills mb-3 d-flex justify-content-center" id="pills-tab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="pills-customers-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-customers" type="button" role="tab" aria-controls="pills-customers"
                            aria-selected="true">Add Customers</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pills-template-tab" data-bs-toggle="pill"
                            data-bs-target="#pills-template" type="button" role="tab" aria-controls="pills-template"
                            aria-selected="false">Email Template</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pills-send-tab" data-bs-toggle="pill" data-bs-target="#pills-send"
                            type="button" role="tab" aria-controls="pills-send" aria-selected="false">
                            Send Email
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pills-send-tab" data-bs-toggle="pill" data-bs-target="#pills-faq"
                            type="button" role="tab" aria-controls="pills-faq" aria-selected="false">
                            Add FAQ
                        </button>
                    </li>
                </ul>
                <div class="row tab-content d-flex justify-content-center" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-customers" role="tabpanel"
                        aria-labelledby="pills-customers-tab">
                        <div class="card">
                            <!-- add customer -->
                            <div class="row d-flex justify-content-center" id="add-customer">
                                <h3>Add Customer Data</h3>

                                <div class="mb-4">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="radioCustomer"
                                        id="radioCustomer1" value="register" checked>
                                        <label class="form-check-label">Register Customer</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="radioCustomer"
                                            id="radioCustomer2" value="upload">
                                        <label class="form-check-label">Upload Data Customer</label>
                                    </div>
                                </div>

                                <!-- upload -->
                                <div id="uploadCustomer" class="row d-flex justify-content-center mb-4">

                                    <div class="row d-flex justify-content-center mb-4">
                                        <div class="row d-flex justify-content-center alert alert-info" role="alert">
                                            <h4 class="text-center">Template</h4>
                                            <hr>
                                            <p class="text-center">
                                                Upload data customer mengikuti format template di bawah ini.
                                            </p>
                                            <div class="col-auto d-flex justify-content-center">
                                                <a href="{{url_for('download_template')}}">
                                                    <button id="downloadexcel" type="button"
                                                        class="btn btn-success btn-icon-text">
                                                        <i class="fa fa-download btn-icon-prepend"></i>
                                                        Download Template .xlsx
                                                    </button>
                                                </a>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row d-flex justify-content-center mb-4">
                                        <p class="text-muted text-center">
                                            Upload Data Customers
                                        </p>
                                        <div class="col-4 d-flex justify-content-center">
                                            <input class="form-control form-control-lg" type="file" id="file_customers"
                                                name="file_cutomers">
                                        </div>
                                        <div class="col-auto">
                                            <button id="uploadData" class="btn button-primary" type="button">
                                                Submit
                                            </button>
                                        </div>
                                    </div>

                                    <div class="col-12">
                                        <div id="progress_bar" class="progress" style="visibility: hidden;">
                                            <div class="progress-bar progress-bar-striped progress-bar-animated bg-info"
                                                role="progressbar" aria-valuemin="0" aria-valuenow="0"
                                                aria-valuemax="100" style="width: 0%"></div>
                                        </div>
                                        <div class="text-center" id="percentageLoading" style="visibility: hidden;">0%
                                        </div>
                                    </div>

                                </div>

                                <!-- register -->
                                <div class="row d-flex justify-content-center" id="registerCustomer">

                                    <form id="register-form">
                                        <div class="row d-flex align-items-stretch mb-2">
                                            <div class="form-group col-md-6">
                                                <label class="text-muted" for="name">Nama</label>
                                                <input type="text" name="name" class="form-control" id="name" required>
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label class="text-muted" for="radioJk">Jenis Kelamin</label>
                                                <div class="form-control-plaintext align-middle">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="radioJk"
                                                            id="radioJk1" value="L" required>
                                                        <label class="form-check-label" for="radioJk1">Laki-laki</label>
                                                    </div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="radioJk"
                                                            id="radioJk2" value="P">
                                                        <label class="form-check-label" for="radioJk2">Perempuan</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row d-flex align-items-stretch mb-2">
                                            <div class="form-group col-md-4">
                                                <label class="text-muted" for="tempat-lahir">Tempat Lahir</label>
                                                <input type="text" name="tempat_lahir" class="form-control"
                                                    id="tempat_lahir" required>
                                            </div>
                                            <div class="form-group col-md-4">
                                                <label class="text-muted" for="name">Tanggal Lahir</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="fa fa-calendar"></i>
                                                    </span>
                                                    <input placeholder="yyyy-mm-dd" type="text" name="tgl_lahir"
                                                        class="form-control datedropper" id="tgl_lahir" required>
                                                </div>
                                            </div>
                                            <div class="form-group col-md-4">
                                                <label class="text-muted" for="name">Pendidikan</label>
                                                <select class="form-control form-select" name="pendidikan"
                                                    id="pendidikan" required>
                                                    <option value="" selected disabled>Pilih Tingkat Pendidikan</option>
                                                    {% for p in pendidikan %}
                                                    <option value="{{ p.id_pendidikan }}">{{ p.tingkat_pendidikan }}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </div>

                                        </div>

                                        <div class="row d-flex align-items-stretch mb-2">

                                            <div class="form-group col-md-4">
                                                <label class="text-muted" for="name">Jenis Pekerjaan</label>
                                                <select class="form-control form-select" name="j_pekerjaan"
                                                    id="j_pekerjaan" required>
                                                    <option value="" selected disabled>Pilih Jenis Pekerjaan</option>
                                                    {% for pekerjaan in jenis_pekerjaan %}
                                                    <option value="{{pekerjaan.id_pekerjaan}}">
                                                        {{pekerjaan.jenis_pekerjaan}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>

                                            <div class="form-group col-md-4">
                                                <label class="text-muted" for="name">Pekerjaan</label>
                                                <input type="text" name="pekerjaan" class="form-control" id="pekerjaan"
                                                    required>
                                            </div>

                                            <div id="form-grup-instansi" class="form-group col-md-4">
                                                <label class="text-muted" for="name">Instansi</label>
                                                <input type="text" name="instansi" class="form-control" id="instansi">
                                            </div>

                                        </div>

                                        <div class="row d-flex align-items-stretch mb-2">
                                            <div class="form-group col-md-6">
                                                <label class="text-muted" for="email">Email</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="fa fa-envelope"></i>
                                                    </span>
                                                    <input type="text" name="email" class="form-control" id="email"
                                                        required>
                                                </div>
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label class="text-muted" for="name">Nomor Hp/Whatsaap</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="fa fa-phone"></i>
                                                    </span>
                                                    <input type="text" name="phone" class="form-control" id="phone"
                                                        required, minlength="10" , maxlength="14">
                                                    <input type="text" name="phone-val" class="form-control"
                                                        id="phone-val" style="display: none;">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row d-flex align-items-stretch mb-2">
                                            <label class="text-muted mt-2"><strong>Keterangan Domisili
                                                    :</strong></label>
                                            <div class="form-group col-md-6">
                                                <label class="text-muted" for="name">Provinsi</label>
                                                <select class="form-control form-select" name="dom_prov" id="dom_prov"
                                                    required>
                                                    <option value="" selected disabled>Pilih Provinsi</option>
                                                    {% for prov in provinsi %}
                                                    <option value="{{ prov.kode_prov }}">{{ prov.nama_prov }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label class="text-muted" for="name">Kabupaten/Kota</label>
                                                <select class="form-control form-select" name="dom_kab" id="dom_kab"
                                                    required>
                                                    <option value="" selected disabled>Pilih Kabupaten/Kota</option>
                                                </select>
                                            </div>

                                        </div>
                                        <div class="row d-flex align-items-stretch mb-2">
                                            <div class="form-group col-md-12">
                                                <label class="text-muted" for="name">Alamat</label>
                                                <textarea name="alamat" class="form-control" id="alamat" required
                                                    rows="5"></textarea>
                                            </div>
                                        </div>
                                        <div class="row d-flex align-items-stretch mb-2">
                                            <div class="col-md-12">
                                                <div class="alert alert-info" role="alert">
                                                    <h4 class="alert-heading">Persetujuan</h4>
                                                    <hr>
                                                    <p>
                                                        Saya bersedia untuk menerima dan memperoleh secara terus-menerus
                                                        informasi terkini terkait data statistik berupa softcopy
                                                        publikasi, tabel data, unsur kegiatan, berita, dll. Layanan ini
                                                        tidak dipungut biaya (gratis).
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row d-flex align-items-stretch mb-2">
                                            <div class="col-auto">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value=""
                                                        id="persetujuan" name="persetujuan" required>
                                                    <label class="form-check-label" for="flexCheckDefault">
                                                        Saya setuju
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row d-flex justify-content-center mb-2">
                                            <div class="col-auto">
                                                <button id="btn-register" class="button-primary">Submit</button>
                                            </div>
                                        </div>

                                        <div class="row d-flex justify-content-center mb-2" id="errorMsg">

                                        </div>
                                    </form>

                                </div>
                            </div>

                            <div class="row border-bottom border-4 mt-4 mb-4"></div>

                            <!-- table customer -->
                            <div class="row mb-4">
                                <h3>Data Customers Klik Jempol</h3>
                                <p>Jumlah customer : {{jumlah_customers}}</p>
                                <table class="table table-striped" id="table-customers">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">Nama</th>
                                            <th scope="col">Jenis Kelamin</th>
                                            <th scope="col">Email</th>
                                            <th scope="col">No. Handphone</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <!-- <tbody id="body-table-customers">
                                        {% for customer in customers%}
                                        <tr>
                                            <td></td>
                                            <td>{{customer.nama}}</td>
                                            <td>{{customer.jenis_kelamin}}</td>
                                            <td>{{customer.email}}</td>
                                            <td>{{customer.phone}}</td>
                                            <td class="d-flex justify-content-around">
                                                <button class=" badge btn-rounded btn-icon btn-primary btn-sm"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#editCustomer_{{customer.id_customer}}">
                                                    <i class="bi bi-pencil-fill btn-icon-prepend"></i>
                                                </button>
                                                <button class="badge btn-rounded btn-icon btn-danger btn-sm"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#deleteCustomer_{{customer.id_customer}}">
                                                    <i class="bi bi-trash-fill btn-icon-prepend"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        {% endfor %}

                                    </tbody> -->
                                </table>


                            </div>
                            <!-- end table customer -->

                        </div>
                    </div>

                    <!-- template email -->
                    <div class="tab-pane fade" id="pills-template" role="tabpanel" aria-labelledby="pills-template-tab">
                        <div class="card">
                            <div class="row d-flex justify-content-center" id="formTemplateEmail">
                                <h3>Add Template</h3>
                                <form id="add-template-form">
                                    <div class="row d-flex align-items-stretch mb-2">
                                        <div class="form-group">
                                            <label for="name">Subject</label>
                                            <input type="text" class="form-control" name="subject" id="subject"
                                                required>
                                        </div>
                                    </div>
                                    <div class="row d-flex align-items-stretch">
                                        <div class="form-group col-md-6">
                                            <label for="nama_produk">Nama Produk</label>
                                            <input type="text" name="nama_produk" class="form-control" id="nama_produk"
                                                required>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label for="lampiran">Link Lampiran</label>
                                            <div class="input-group">
                                                <span class="input-group-text">
                                                    <i class="fa fa-link"></i>
                                                </span>
                                                <input type="text" class="form-control" name="lampiran" id="lampiran"
                                                    required>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row d-flex align-items-stretch mb-2">
                                        <div class="form-group">
                                            <label for="body-email">Body</label>
                                            <textarea id="body-email" class="form-control" name="body-email" rows="10"
                                                required></textarea>
                                        </div>
                                    </div>

                                    <div class="text-center mt-4">
                                        <button class="button-primary" id="add-template-email">Save Template</button>
                                    </div>
                                </form>
                            </div>

                            <div class="row border-bottom border-4 mt-4 mb-4"></div>

                            <div class="row mb-4">
                                <h3>Data Template Email</h3>
                                <table class="table table-striped" id="table-templates">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col" class="text-center">Subject</th>
                                            <th scope="col" class="text-left">Produk</th>
                                            <th scope="col" class="text-center">Lampiran</th>
                                            <th scope="col" class="text-center">Status</th>
                                            <th scope="col" class="text-center">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for template in all_templates %}
                                        <tr>
                                            <td class="align-middle"></td>
                                            <td class="align-middle">{{template.subject}}</td>
                                            <td class="align-middle">{{template.nama_produk}}</td>
                                            <td class="text-center align-middle">
                                                <a href="{{template.lampiran}}" target="_blank" type="button"
                                                    class="btn btn-success btn-icon-text">
                                                    <i class="bi bi-link-45deg btn-icon-prepend"></i>
                                                    Lampiran
                                                </a>
                                            </td>
                                            <td class="align-middle text-center">
                                                {% if(template.status==0) %}
                                                <h5>
                                                    <span class="badge rounded-pill bg-secondary">
                                                        Belum Dikirim
                                                    </span>
                                                </h5>
                                                {% elif (template.status==1) %}
                                                <h5>
                                                    <span class="badge rounded-pill bg-success">
                                                        Sudah Terikirim
                                                    </span>
                                                </h5>
                                                {% elif (template.status==2) %}
                                                <h5>
                                                    <span class="badge rounded-pill bg-danger">
                                                        Gagal Terikirim
                                                    </span>
                                                </h5>
                                                {% else %}
                                                <h5>
                                                    <span class="badge rounded-pill bg-info">
                                                        Dalam Proses
                                                    </span>
                                                </h5>
                                                {% endif %}
                                            </td>
                                            <td class="text-center align-middle">
                                                <button class=" badge btn-rounded btn-icon btn-primary btn-sm"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#editTemplate_{{template.id_template}}">
                                                    <i class="bi bi-pencil-fill btn-icon-prepend"></i>
                                                </button>
                                                <button class="badge btn-rounded btn-icon btn-danger btn-sm"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#deleteTemplate_{{template.id_template}}">
                                                    <i class="bi bi-trash-fill btn-icon-prepend"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        {% endfor %}

                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>

                    <!-- send email -->
                    <div class="tab-pane fade" id="pills-send" role="tabpanel" aria-labelledby="pills-send-tab">
                        <div class="card">
                            <div class="row d-flex justify-content-center mb-4">

                                <div class="row d-flex align-items-stretch mb-2">
                                    <div class="form-group">
                                        <label for="template">Template Email</label>
                                        <select class="form-select" name="template" id="template">
                                            <option selected disabled value="">Pilih Template Email (hanya template yang belum terkirim) </option>
                                            {% for template in template_not_send %}
                                            <option value="{{template.id_template}}">{{template.subject}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>

                                <div id="container-detail" class="row d-flex justify-content-center mt-2">
                                    <div id="detail-template" class="col-lg-12 d-flex justify-content-center">
                                        <table class="table" id="table-template-send">
                                            <thead>
                                                <tr>
                                                    <th>Subject</th>
                                                    <th>Product</th>
                                                    <th>Link Lampiran</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbody-template-send">

                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="text-center mt-4">
                                    <button class="button-primary" id="send-email-btn">Send Email to Customers</button>
                                </div>

                            </div>

                            <!-- divider -->
                            <div class="row border-bottom border-4 mt-4 mb-4"></div>

                            <div class="row">
                                <div>
                                    <div id="send-progress-bar" class="progress progress-round mx-auto" data-value='0'>
                                        <span class="progress-left">
                                            <span class="progress-bar border-success"></span>
                                        </span>
                                        <span class="progress-right">
                                            <span class="progress-bar border-success"></span>
                                        </span>
                                        <div
                                            class="progress-value w-100 h-100 rounded-circle d-flex align-items-center justify-content-center">
                                            <div id="send-progress-label" class="h2 font-weight-bold">0<small>%</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row d-flex justify-content-center text-center mt-4">
                                        <div class="col-3 border-right">
                                            <div id="succed-send-label" class="h4 font-weight-bold mb-0">0</div><span
                                                class="small text-gray">Success Send</span>
                                        </div>
                                        <div class="col-3">
                                            <div id="failed-send-label" class="h4 font-weight-bold mb-0">0</div><span
                                                class="small text-gray">Failed Send</span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- add faq -->
                    <div class="tab-pane fade" id="pills-faq" role="tabpanel"
                        aria-labelledby="pills-customers-tab">
                        <div class="card">
                            <!-- add customer -->
                            <div class="row d-flex justify-content-center" id="add-faq">
                                <h3>Add FAQ</h3>

                                

                                <!-- add faq -->
                                <div class="row d-flex justify-content-center" id="addFAQ">

                                    <form id="faq-form">
                                        
                                        <div class="row d-flex align-items-stretch mb-2">
                                            <div class="form-group col-md-12">
                                                <label class="text-muted" for="question">Pertanyaan</label>
                                                <textarea name="question" class="form-control" id="question" required
                                                    rows="5"></textarea>
                                            </div>
                                        </div>
                                        
                                        <div class="row d-flex align-items-stretch mb-2">
                                            <div class="form-group col-md-12">
                                                <label class="text-muted" for="answer">Jawaban</label>
                                                <textarea name="answer" class="form-control" id="answer" required
                                                    rows="5"></textarea>
                                            </div>
                                        </div>

                                        <div class="row d-flex justify-content-center mb-2">
                                            <div class="col-auto">
                                                <button id="btn-add-faq" class="button-primary">Submit</button>
                                            </div>
                                        </div>

                                        <div class="row d-flex justify-content-center mb-2" id="errorMsg">

                                        </div>
                                    </form>

                                </div>
                            </div>

                            <div class="row border-bottom border-4 mt-4 mb-4"></div>

                            <!-- table FAQ -->
                            <div class="row mb-4">
                                <h3>Data FAQ Klik Jempol</h3>
                                <table class="table table-striped" id="table-faq">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th class="col-5 text-center" scope="col">Pertanyaan</th>
                                            <th class="col-5 text-center" scope="col">Jawaban</th>
                                            <th class="col-1 text-center" scope="col">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="body-table-faq">
                                        {% for f in faq%}
                                        <tr>
                                            <td></td>
                                            <td class="col-5">{{f.question}}</td>
                                            <td class="col-5">{{f.answer}}</td>
                                            <td class="col-1 text-center align-middle">
                                                <button class=" badge btn-rounded btn-icon btn-primary btn-sm"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#editFAQ_{{f.id_faq}}">
                                                    <i class="bi bi-pencil-fill btn-icon-prepend"></i>
                                                </button>
                                                <button class="badge btn-rounded btn-icon btn-danger btn-sm"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#deleteFAQ_{{f.id_faq}}">
                                                    <i class="bi bi-trash-fill btn-icon-prepend"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        {% endfor %}

                                    </tbody>
                                </table>


                            </div>
                            <!-- end table customer -->

                        </div>
                    </div>
                </div>

            </div>


        </section><!-- End Tools Section -->

        <!-- ======= Team Section ======= -->
        <section id="team" class="team section-bg">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Team</h2>
                    <p>Berikut ini adalah team yang terlibat dalam pembangunan layanan KLIK JEMPOL.</p>
                </div>

                <div class="row">

                    <div class="col-lg-6">
                        <div class="member d-flex align-items-start" data-aos="zoom-in" data-aos-delay="100">
                            <div class="pic"><img src="../static/assets/img/team/trio.jpg" class="img-fluid" alt="">
                            </div>
                            <div class="member-info">
                                <h4>Trio Wira Dharma SST</h4>
                                <span>Subkoordinator Fungsi</span>
                                <p>Diseminasi dan Layanan Statistik</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mt-4 mt-lg-0">
                        <div class="member d-flex align-items-start" data-aos="zoom-in" data-aos-delay="200">
                            <div class="pic"><img src="../static/assets/img/team/nitatri.jpg" class="img-fluid" alt="">
                            </div>
                            <div class="member-info">
                                <h4>Nita Tri Andini SST</h4>
                                <span>Staf</span>
                                <p>Diseminasi dan Layanan Statistik</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mt-4">
                        <div class="member d-flex align-items-start" data-aos="zoom-in" data-aos-delay="300">
                            <div class="pic"><img src="../static/assets/img/team/ari.jpg" class="img-fluid" alt="">
                            </div>
                            <div class="member-info">
                                <h4>Ari Rismansyah</h4>
                                <span>Staf</span>
                                <p> Integrasi Pengolahan Data</p>
                                <div class="social">
                                    <a href="https://github.com/arirismansyah/emailblasting_klik_jempol" target="_blank">
                                        <i class="ri-github-fill"></i>
                                        
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </section>
        <!-- End Team Section -->

        <!-- ======= Frequently Asked Questions Section ======= -->
        <section id="faq" class="faq section-bg">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Frequently Asked Questions</h2>
                    <p>Berikut ini merupakan daftar pertanyaan terkait dengan KLIK JEMPOL</p>
                </div>

                <div class="faq-list">
                    <ul>
                        {%for f in faq%}
                        <li data-aos="fade-up" data-aos-delay="100">
                            <i class="bx bx-help-circle icon-help"></i> <a data-bs-toggle="collapse" class="collapsed"
                                data-bs-target="#faq-list-{{f.id_faq}}">{{f.question}}<i
                                    class="bx bx-chevron-down icon-show"></i><i
                                    class="bx bx-chevron-up icon-close"></i></a>
                            <div id="faq-list-{{f.id_faq}}" class="collapse" data-bs-parent=".faq-list">
                                <p>
                                    {{f.answer}}
                                </p>
                            </div>
                        </li>
                        {%endfor%}
                    </ul>
                </div>

            </div>
        </section>
        <!-- End Frequently Asked Questions Section -->

        <!-- ======= Contact Section ======= -->
        <section id="contact" class="contact">
            <div class="container" data-aos="fade-up">

                <div class="section-title">
                    <h2>Contact</h2>
                    <p>Anda dapat mengunjungi kami dan menghubungi kami melalui alamat dan kontak di bawah ini:</p>
                </div>

                <div class="row d-flex justify-content-center">

                    <div class="col-lg-12 d-flex align-items-stretch">
                        <div class="info">
                            <div class="address">
                                <i class="bi bi-geo-alt"></i>
                                <h4>Location:</h4>
                                <p>Jalan Kapten Anwar Sastro No. 1694/1131, Sungai Pangeran, Ilir Timur I, Sungai
                                    Pangeran, Kec. Ilir Tim. I, Kota Palembang, Sumatera Selatan 30114</p>
                            </div>

                            <div class="email">
                                <i class="bi bi-envelope"></i>
                                <h4>Email:</h4>
                                <p>bps1600@bps.go.id
                                    <br>diseminasi1600@bps.go.id
                                </p>
                            </div>

                            <div class="phone">
                                <i class="bi bi-phone"></i>
                                <h4>Call:</h4>
                                <p>BPS Provinsi Sumatera Selatan : (0711) 351665
                                    <br>Diseminasi dan Layanan Statistik : (08128770725)
                                </p>
                            </div>

                            <iframe
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3984.441790871244!2d104.74871281475693!3d-2.974821197833436!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e3b75dfd4e98b65%3A0x33a20c9d55dd1822!2sBadan%20Pusat%20Statistik%20Provinsi%20Sumatera%20Selatan!5e0!3m2!1sid!2sid!4v1633503350490!5m2!1sid!2sid"
                                frameborder="0" style="border:0; width: 100%; height: 290px;" allowfullscreen></iframe>
                        </div>

                    </div>

                </div>

            </div>
        </section>
        <!-- End Contact Section -->

        <!-- Modal Customer -->
        <!-- {% for c in customers %} -->

        <!-- Modals Delete -->
        <!-- <div class="modal fade" id="deleteCustomer_{{c.id_customer}}" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Delete - {{c.nama}}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row d-flex justify-content center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" fill="currentColor"
                                class="bi bi-trash" viewBox="0 0 16 16">
                                <path
                                    d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
                                <path fill-rule="evenodd"
                                    d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                            </svg>
                            <p class="text-muted text-center">
                                <strong>
                                    Anda yakin ingin menghapus data customer?
                                </strong>
                            </p>
                            <p class="text-muted text-center">Atas nama : {{c.nama}}</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="text" name="id-customer-delete" id="id-customer-delete" readonly
                            style="display: none;" value="{{c.id_customer}}">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button id="delete-customer" type="button" class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </div> -->

        <!-- Modals Edit -->
        <!-- <div class="modal fade" id="editCustomer_{{c.id_customer}}" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Edit - {{c.nama}}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row d-flex justify-content-center" id="registerCustomer">

                            <form id="update-customer-form">
                                <div class="row d-flex align-items-stretch mb-2">
                                    <div class="form-group col-md-6">
                                        <label class="text-muted" for="name">Nama</label>
                                        <input type="text" name="name" class="form-control" id="name" value="{{c.nama}}"
                                            required>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="text-muted" for="radioJk">Jenis Kelamin</label>
                                        <div class="form-control-plaintext align-middle">
                                            <div class="form-check form-check-inline">
                                                {% if (c.jenis_kelamin=='L') %}
                                                <input class="form-check-input" type="radio" name="radioJk"
                                                    id="radioJk1" value="L" required checked>
                                                {% else %}
                                                <input class="form-check-input" type="radio" name="radioJk"
                                                    id="radioJk1" value="L" required>
                                                {% endif %}
                                                <label class="form-check-label" for="radioJk1">Laki-laki</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                {% if(c.jenis_kelamin=='P') %}
                                                <input class="form-check-input" type="radio" name="radioJk"
                                                    id="radioJk2" value="P" checked>
                                                {% else %}
                                                <input class="form-check-input" type="radio" name="radioJk"
                                                    id="radioJk2" value="P">
                                                {% endif %}
                                                <label class="form-check-label" for="radioJk2">Perempuan</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row d-flex align-items-stretch mb-2">
                                    <div class="form-group col-md-4">
                                        <label class="text-muted" for="tempat-lahir">Tempat Lahir</label>
                                        <input type="text" name="tempat_lahir" class="form-control" id="tempat_lahir"
                                            required value="{{c.tempat_lahir}}">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="text-muted" for="name">Tanggal Lahir</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa fa-calendar"></i>
                                            </span>
                                            <input placeholder="yyyy-mm-dd" type="text" name="tgl_lahir"
                                                class="form-control datedropper" id="tgl_lahir" required
                                                value="{{c.tanggal_lahir}}">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label class="text-muted" for="name">Pendidikan</label>
                                        <select class="form-control form-select" name="pendidikan" id="pendidikan"
                                            required>
                                            <option value="" selected disabled>Pilih Tingkat Pendidikan</option>
                                            {% for p in pendidikan %}
                                            {% if(c.pendidikan == p.id_pendidikan) %}
                                            <option value="{{ p.id_pendidikan }}" selected>{{ p.tingkat_pendidikan }}
                                            </option>
                                            {% else %}
                                            <option value="{{ p.id_pendidikan }}">{{ p.tingkat_pendidikan }}
                                            </option>
                                            {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>

                                </div>

                                <div class="row d-flex align-items-stretch mb-2">

                                    <div class="form-group col-md-4">
                                        <label class="text-muted" for="name">Jenis Pekerjaan</label>
                                        <select class="form-control form-select" name="j_pekerjaan" id="j_pekerjaan"
                                            required>
                                            <option value="" selected disabled>Pilih Jenis Pekerjaan</option>
                                            {% for pekerjaan in jenis_pekerjaan %}
                                            {% if(c.jenis_pekerjaan==pekerjaan.id_pekerjaan) %}
                                            <option value="{{pekerjaan.id_pekerjaan}}" selected>
                                                {{pekerjaan.jenis_pekerjaan}}</option>
                                            {% else %}
                                            <option value="{{pekerjaan.id_pekerjaan}}">
                                                {{pekerjaan.jenis_pekerjaan}}</option>
                                            {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>

                                    <div class="form-group col-md-4">
                                        <label class="text-muted" for="name">Pekerjaan</label>
                                        <input type="text" name="pekerjaan" class="form-control" id="pekerjaan" required
                                            value="{{c.pekerjaan}}">
                                    </div>

                                    <div id="form-grup-instansi" class="form-group col-md-4">
                                        <label class="text-muted" for="name">Instansi</label>
                                        <input type="text" name="instansi" class="form-control" id="instansi"
                                            value="{{c.instansi}}">
                                    </div>

                                </div>

                                <div class="row d-flex align-items-stretch mb-2">
                                    <div class="form-group col-md-6">
                                        <label class="text-muted" for="email">Email</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa fa-envelope"></i>
                                            </span>
                                            <input type="text" name="email" class="form-control" id="email" required
                                                value="{{c.email}}">
                                        </div>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="text-muted" for="name">Nomor Hp/Whatsaap</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa fa-phone"></i>
                                            </span>
                                            <input type="text" name="phone" class="form-control" id="phone" required,
                                                minlength="10" , maxlength="14" value="{{c.phone}}">
                                            <input type="text" name="phone-val" class="form-control" id="phone-val"
                                                style="display: none;" value="{{c.phone}}">
                                        </div>
                                    </div>
                                </div>

                                <div class="row d-flex align-items-stretch mb-2">
                                    <label class="text-muted mt-2"><strong>Keterangan Domisili
                                            :</strong></label>
                                    <div class="form-group col-md-6">
                                        <label class="text-muted" for="name">Provinsi</label>
                                        <select class="form-control form-select" name="dom_prov" id="dom_prov" required>
                                            <option value="" selected disabled>Pilih Provinsi</option>
                                            {% for prov in provinsi %}
                                            {% if(c.prov_domisili == prov.kode_prov) %}
                                            <option value="{{ prov.kode_prov }}" selected>{{ prov.nama_prov }}</option>
                                            {% else %}
                                            <option value="{{ prov.kode_prov }}">{{ prov.nama_prov }}</option>
                                            {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label class="text-muted" for="name">Kabupaten/Kota</label>
                                        <select class="form-control form-select" name="dom_kab" id="dom_kab" required>
                                            <option value="" selected disabled>Pilih Kabupaten/Kota</option>
                                            {% for k in all_kabkot %}
                                            {% if(k.id_kabkot == c.kab_domisili) %}
                                            <option value="{{k.id_kabkot}}" selected>{{k.nama_kabkot}}</option>
                                            {% else %}
                                            <option value="{{k.id_kabkot}}">{{k.nama_kabkot}}</option>
                                            {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>

                                </div>
                                <div class="row d-flex align-items-stretch mb-2">
                                    <div class="form-group col-md-12">
                                        <label class="text-muted" for="name">Alamat</label>
                                        <textarea name="alamat" class="form-control" id="alamat" required
                                            rows="5">{{c.alamat_domisili}}</textarea>
                                    </div>
                                </div>
                                <input type="text" name="id_customer" id="id_customer" value="{{c.id_customer}}"
                                    style="display: none;">
                            </form>

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button id="update-customer" type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %} -->
        <!-- End Modal Customer -->

        <!-- Modal Templates -->
        {% for t in all_templates %}

        <!-- Modals Delete -->
        <div class="modal fade" id="deleteTemplate_{{t.id_template}}" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Delete - {{t.subject}}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row d-flex justify-content center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" fill="currentColor"
                                class="bi bi-trash" viewBox="0 0 16 16">
                                <path
                                    d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
                                <path fill-rule="evenodd"
                                    d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                            </svg>
                            <p class="text-muted text-center">
                                <strong>
                                    Anda yakin ingin menghapus template ini?
                                </strong>
                            </p>
                            <p class="text-muted text-center">Subject : {{t.subject}}</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="text" name="id-template-delete" id="id-template-delete" readonly
                            style="display: none;" value="{{t.id_template}}">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button id="delete-template" type="button" class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals Edit -->
        <div class="modal fade" id="editTemplate_{{t.id_template}}" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Edit - {{t.subject}}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row d-flex justify-content-center" id="editTemplate">
                            <form id="edit-template-form">
                                <div class="row d-flex align-items-stretch mb-2">
                                    <div class="form-group">
                                        <label for="name">Subject</label>
                                        <input type="text" class="form-control" name="subject" id="subject" required
                                            value="{{t.subject}}">
                                    </div>
                                </div>
                                <div class="row d-flex align-items-stretch">
                                    <div class="form-group col-md-6">
                                        <label for="nama_produk">Nama Produk</label>
                                        <input type="text" name="nama_produk" class="form-control" id="nama_produk"
                                            required value="{{t.nama_produk}}">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="lampiran">Link Lampiran</label>
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fa fa-link"></i>
                                            </span>
                                            <input type="text" class="form-control" name="lampiran" id="lampiran"
                                                required value="{{t.lampiran}}">
                                        </div>
                                    </div>
                                </div>
                                <div class="row d-flex align-items-stretch mb-2">
                                    <div class="form-group">
                                        <label for="body-email">Body</label>
                                        <textarea id="body-email" class="form-control" name="body-email" rows="10"
                                            required>{{t.body}}</textarea>
                                    </div>
                                </div>

                                <input type="text" name="id_template" id="id_template" value="{{t.id_template}}"
                                    style="display: none;">
                            </form>

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button id="update-template" type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        <!-- End Modal Template -->

        <!-- Modal FAQ -->
        {%for f in faq%}
        <!-- Modal Delete -->
        <div class="modal fade" id="deleteFAQ_{{f.id_faq}}" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Delete - FAQ</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row d-flex justify-content center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" fill="currentColor"
                                class="bi bi-trash" viewBox="0 0 16 16">
                                <path
                                    d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
                                <path fill-rule="evenodd"
                                    d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                            </svg>
                            <p class="text-muted text-center">
                                <strong>
                                    Anda yakin ingin menghapus FAQ ini?
                                </strong>
                            </p>
                            <p class="text-muted text-center">Pertanyaan : {{f.question}}</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="text" name="id-faq-delete" id="id-faq-delete" readonly
                            style="display: none;" value="{{f.id_faq}}">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button id="delete-faq" type="button" class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal Edit -->
        <div class="modal fade" id="editFAQ_{{f.id_faq}}" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Edit - FAQ</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row d-flex justify-content-center" id="editFAQ">
                            <form id="edit-faq-form">
                                
                                <div class="row d-flex align-items-stretch mb-2">
                                    <div class="form-group col-md-12">
                                        <label class="text-muted" for="question">Pertanyaan</label>
                                        <textarea name="question" class="form-control" id="question" required
                                            rows="5">{{f.question}}</textarea>
                                    </div>
                                </div>
                                
                                <div class="row d-flex align-items-stretch mb-2">
                                    <div class="form-group col-md-12">
                                        <label class="text-muted" for="answer">Jawaban</label>
                                        <textarea name="answer" class="form-control" id="answer" required
                                            rows="5">{{f.answer}}</textarea>
                                    </div>
                                </div>

                                <input type="text" name="id_faq" id="id_faq" value="{{f.id_faq}}"
                                    style="display: none;">
                            </form>

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button id="update-faq" type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>
        {%endfor%}
        <!-- End Modal FAQ -->

    </main><!-- End #main -->

    <!-- ======= Footer ======= -->
    <footer id="footer">

        <div class="footer-newsletter">
            <div class="container">
                <div class="row justify-content-center">

                </div>
            </div>
        </div>

        <div class="footer-top">
            <div class="container">
                <div class="row d-flex justify-content-center">

                    <div class="col-lg-6 col-md-6 footer-contact">
                        <h3>BPS Provinsi Sumatera Selatan</h3>
                        <p>
                            Jalan Kapten Anwar Sastro No. 1694/1131, Sungai Pangeran, Ilir Timur I, Sungai
                            Pangeran, Kec. Ilir Tim. I, Kota Palembang, Sumatera Selatan 30114<br><br>
                            <strong>Phone:</strong> (0711) 351665<br>
                            <strong>Email:</strong> bps1600@bps.go.id<br>
                        </p>
                    </div>

                    <div class="col-lg-6 col-md-6 footer-links">
                        <h4>Our Social Networks</h4>
                        <p>Follow us on our social medias:</p>
                        <div class="social-links mt-3">
                            <a href="https://twitter.com/bpssumsel" class="twitter" target="_blank"><i class="bx bxl-twitter"></i></a>
                            <a href="https://www.facebook.com/bpsprovsumsel/" class="facebook" target="_blank"><i
                                    class="bx bxl-facebook"></i></a>
                            <a href="https://www.instagram.com/bpssumsel/" class="instagram" target="_blank"><i
                                    class="bx bxl-instagram"></i></a>
                            <a href="#" class="linkedin"><i class="bx bxl-youtube" target="_blank"></i></a>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="container footer-bottom clearfix">
            <div class="copyright">
                &copy; Copyright <strong><span>BPS Provinsi Sumatera Selatan</span></strong>. All Rights Reserved
            </div>
        </div>
    </footer><!-- End Footer -->


    <div id="preloader"></div>
    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
            class="bi bi-arrow-up-short"></i></a>

    <!-- Vendor JS Files -->
    <script src="../static/assets/vendor/aos/aos.js"></script>
    <script src="../static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../static/assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="../static/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="../static/assets/vendor/php-email-form/validate.js"></script>
    <script src="../static/assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="../static/assets/vendor/waypoints/noframework.waypoints.js"></script>

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <!-- jquery validate -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.js"></script>

    <!-- datatables css -->
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">
    <!-- datatables -->
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.print.min.js"></script>

    <!-- sweetalert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.7/dist/sweetalert2.all.min.js"></script>


    <!-- Template Main JS File -->
    <script src="../static/assets/js/main.js"></script>
    <script src="../static/assets/js/jquery.richtext.min.js"></script>
    <script src="../static/assets/js/datedropper.pro.min.js"></script>

    <!-- Details Template Email -->
    <script>
        $(document).ready(function () {
            var selected_template = $('#template').val();
            if (selected_template != null && selected_template != '') {
                //console.log(selected_template);
            } else {
                $('#detail-template').attr("display", "none");
            }
            $('#template').change(function () {
                var selected_template = $('#template').val();
                //console.log(selected_template);
                if (selected_template != null || selected_template != '') {
                    var template = function () {
                        var tmp = null;

                        if (selected_template != null) {
                            $.ajax({
                                async: false,
                                method: "POST",
                                url: "{{url_for('get_template')}}",
                                data: {
                                    'id_template': selected_template,
                                },
                                success: function (response) {
                                    tmp = response;
                                }
                            });
                        }
                        return tmp;
                    }();

                    //console.log(template);
                    var tbody = '<td>' + template['subject'] + '</td><td>' + template['nama_produk'] + '</td><td>' + template['lampiran'] + '</td>';
                    $('#tbody-template-send').html(tbody);
                }
            });
        });
    </script>

    <!-- Phone Number -->
    <script>
        // On Edit Modals
        $('.modal').on("input", "#phone", function () {
            $("#phone-val").val(destroyMask(this.value));
            this.value = createMask($("#phone-val").val());
        });

        // On Register Form
        $('#phone').on("input", function () {
            $("#phone-val").val(destroyMask(this.value));
            this.value = createMask($("#phone-val").val());
        });

        function createMask(string) {
            return string.replace(/(\d{4})(\d{4})(\d{4})/, "$1-$2-$3");
        }

        function destroyMask(string) {
            return string.replace(/\D/g, '').substring(0, 12);
        }
    </script>

    <!-- Text Editor -->
    <script>
        $(document).ready(function () {
            $('#body-email').richText();
            $('.modal').find('#body-email').richText();
        });
    </script>

    <!-- Datatables -->
    <script>
        $(document).ready(function () {
            var table_all = $('#table-customers').DataTable({
                dom: 'Bfrtip',
                pageLength: 10,
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                "columnDefs": [{
                    "searchable": false,
                    "orderable": false,
                    "targets": 0
                }],
                "order": [
                    [1, 'asc']
                ]
            });

            table_all.on('order.dt search.dt', function () {
                table_all.column(0, {
                    search: 'applied',
                    order: 'applied'
                }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw();
        });
        $(document).ready(function () {
            var table_templates = $('#table-templates').DataTable({
                dom: 'Bfrtip',
                pageLength: 10,
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                "columnDefs": [{
                    "searchable": false,
                    "orderable": false,
                    "targets": 0
                }],
                "order": [
                    [1, 'asc']
                ]
            });

            table_templates.on('order.dt search.dt', function () {
                table_templates.column(0, {
                    search: 'applied',
                    order: 'applied'
                }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw();
        });
        $(document).ready(function () {
            var table_faq = $('#table-faq').DataTable({
                dom: 'Bfrtip',
                pageLength: 10,
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ],
                "columnDefs": [{
                    "searchable": false,
                    "orderable": false,
                    "targets": 0
                }],
                "order": [
                    [1, 'asc']
                ]
            });

            table_faq.on('order.dt search.dt', function () {
                table_faq.column(0, {
                    search: 'applied',
                    order: 'applied'
                }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw();
        });
    </script>

    <!-- Upload & Register Form -->
    <script>
        $(document).ready(function () {
            var add_method = $('input[name = "radioCustomer"]:checked').val();
            var uploadCustomer_clone = $('#uploadCustomer').clone();
            var registerCustomer_clone = $('#registerCustomer').clone();
            if (add_method == 'register') {
                $('#uploadCustomer').remove()
            } else {
                $('#registerCustomer').remove()
            }

            $('input[name = "radioCustomer"]').change(function () {
                var add_method = $('input[name = "radioCustomer"]:checked').val();
                if (add_method == 'register') {
                    $('#uploadCustomer').remove();
                    $('#add-customer').append(registerCustomer_clone);
                } else {
                    $('#registerCustomer').remove();
                    $('#add-customer').append(uploadCustomer_clone);
                }
            });

            // Upload Data Customer
            $('#add-customer').on('click', '#uploadData', function () {

                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });

                var form_data = new FormData();
                var file_customers = $('#file_customers')[0].files;
                document.getElementById('progress_bar').style.visibility = 'visible';

                var thread_id = 0;
                if (file_customers.length > 0) {
                    form_data.append('file_customers', file_customers[0]);

                    $.ajax({
                        url: "{{url_for('upload_customers')}}",
                        type: 'POST',
                        data: form_data,
                        contentType: false,
                        processData: false,
                        success: function (response) {
                            console.log(response.thread_id);
                            document.getElementById('file_customers').value = null;
                            thread_id = response.thread_id;

                            var source = new EventSource('/progress_insert/' + response.thread_id)
                            source.onmessage = function (event) {
                                console.log('progress', event);
                                $('.progress-bar').css('width', event.data + '%').attr('aria-valuenow', event.data);


                                if (event.data >= 100) {
                                    source.close();
                                    setTimeout(function () {
                                        document.getElementById('progress_bar').style.visibility = 'hidden';
                                    }, 1000);

                                    setTimeout(function () {
                                        Toast.fire({
                                            icon: 'success',
                                            title: 'Upload data customer berhasil'
                                        });
                                    }, 1000);

                                    setTimeout(function () {
                                        location.reload();
                                    }, 4000);
                                }
                            }
                        },
                    })

                    //console.log(thread_id);

                }
            });

            // Datedropper
            $('#add-customer').on('focus', '.datedropper', function () {
                $('.datedropper').dateDropper('destroy');
                $('.datedropper').dateDropper({
                    format: 'Y-m-d',
                    theme: 'blue',
                    large: true,
                    largeDefault: true,
                });
            });

            // Fetching Kabupaten/Kota
            $('#add-customer').on('change', '#dom_prov', function () {
                var kode_prov = $('#dom_prov').val();
                var kabkot = function () {
                    var tmp = null;

                    if (kode_prov != null) {
                        $.ajax({
                            async: false,
                            method: "POST",
                            url: "{{url_for('kabkot')}}",
                            data: {
                                'kode_prov': kode_prov,
                            },
                            success: function (response) {
                                tmp = response;
                            }
                        });
                    }
                    return tmp;
                }();
                var options = '<option value="" selected disabled>Pilih Kabupaten/Kota</option>';
                kabkot.forEach(element => {
                    var op = '<option value="' + element['id_kabkot'] + '">' + element['nama_kabkot'] +
                        '</option>';
                    options += op;
                });

                $('#dom_kab').html(options);
            });

            // Fetching Kabupaten/Kota on Modals
            $('.modal').on('change', '#dom_prov', function () {
                var kode_prov = $(this).closest('#dom_prov').val();
                var kabkot = function () {
                    var tmp = null;

                    if (kode_prov != null) {
                        $.ajax({
                            async: false,
                            method: "POST",
                            url: "{{url_for('kabkot')}}",
                            data: {
                                'kode_prov': kode_prov,
                            },
                            success: function (response) {
                                tmp = response;
                            }
                        });
                    }
                    return tmp;
                }();
                var options = '<option value="" selected disabled>Pilih Kabupaten/Kota</option>';
                kabkot.forEach(element => {
                    var op = '<option value="' + element['id_kabkot'] + '">' + element['nama_kabkot'] +
                        '</option>';
                    options += op;
                });
                $(this).parents('.modal').find('#dom_kab').html(options);
                //console.log($(this).parents('.modal').find('#dom_kab'));
            });

            // register customer
            $('#add-customer').on('submit', '#register-form', function (e) {
                e.preventDefault();
                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });

                $.ajax({
                    type: 'post',
                    url: '{{url_for("register_customer")}}',
                    data: $('#register-form').serialize(),
                    success: function (response) {
                        if (response == 'success') {
                            Toast.fire({
                                icon: 'success',
                                title: 'Registrasi berhasil'
                            });
                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: 'Registrasi gagal'
                            })
                        }

                    }
                });

            });
        });
    </script>

    <!-- Delete Customer -->
    <script>
        $(document).ready(function () {
            $('.modal').on('click', '#delete-customer', function () {

                var id_customer = $(this).siblings('#id-customer-delete').val();
                //console.log(id_customer);

                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });


                $.ajax({
                    type: 'post',
                    url: '{{url_for("delete_customer")}}',
                    data: { 'id_customer': id_customer },
                    success: function (response) {
                        if (response == 'success') {
                            Toast.fire({
                                icon: 'success',
                                title: 'Customer berhasil dihapus'
                            });
                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: 'Customer gagal dihapus'
                            })
                        }
                    }
                });

                $(this).parents('.modal').modal('hide');

            });
        });
    </script>

    <!-- Edit Customer -->
    <script>
        $(document).ready(function () {
            $('.modal').on('click', '#update-customer', function (e) {
                e.preventDefault();

                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });

                $.ajax({
                    type: 'post',
                    url: '{{url_for("update_customer")}}',
                    data: $('#update-customer-form').serialize(),
                    success: function (response) {
                        if (response == 'success') {
                            Toast.fire({
                                icon: 'success',
                                title: 'Update data customer berhasil'
                            });
                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: 'Update data customer gagal'
                            })
                        }

                    }

                });

                $(this).parents('.modal').modal('hide');

            });
        });
    </script>

    <!-- Add Template Email -->
    <script>
        $(document).ready(function () {
            $('#formTemplateEmail').on('submit', '#add-template-form', function (e) {
                e.preventDefault();
                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });

                $.ajax({
                    type: 'post',
                    url: '{{url_for("add_template")}}',
                    data: $('#add-template-form').serialize(),
                    success: function (response) {
                        if (response == 'success') {
                            Toast.fire({
                                icon: 'success',
                                title: 'Template berhasil ditambahkan'
                            });
                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: 'Template gagal ditambahkan'
                            })
                        }

                    }
                });
            });
        });
    </script>

    <!-- Edit Template Email -->
    <script>
        $(document).ready(function () {
            $('.modal').on('click', '#update-template', function (e) {
                e.preventDefault();

                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });

                $.ajax({
                    type: 'post',
                    url: '{{url_for("edit_template")}}',
                    data: $('#edit-template-form').serialize(),
                    success: function (response) {
                        if (response == 'success') {
                            Toast.fire({
                                icon: 'success',
                                title: 'Update template berhasil'
                            });
                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: 'Update template gagal'
                            })
                        }

                    }

                });

                $(this).parents('.modal').modal('hide');

            });
        });
    </script>

    <!-- Delete Template Email -->
    <script>
        $(document).ready(function () {
            $('.modal').on('click', '#delete-template', function () {

                var id_template = $(this).siblings('#id-template-delete').val();
                //console.log(id_template);

                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });


                $.ajax({
                    type: 'post',
                    url: '{{url_for("delete_template")}}',
                    data: { 'id_template': id_template },
                    success: function (response) {
                        if (response == 'success') {
                            Toast.fire({
                                icon: 'success',
                                title: 'Template berhasil dihapus'
                            });
                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: 'Template gagal dihapus'
                            })
                        }
                    }
                });

                $(this).parents('.modal').modal('hide');

            });
        });
    </script>

    <!-- Add Faq -->
    <script>
        $(document).ready(function(){
            $('#addFAQ').on('submit', '#faq-form', function(e){
                e.preventDefault();
                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });

                $.ajax({
                    type: 'post',
                    url: '{{url_for("add_faq")}}',
                    data: $('#faq-form').serialize(),
                    success: function (response) {
                        if (response == 'success') {
                            Toast.fire({
                                icon: 'success',
                                title: 'FAQ berhasil ditambahkan'
                            });
                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: 'FAQ gagal ditambahkan'
                            })
                        }

                    }
                });
            });
        });
    </script>

    <!-- Edit Faq -->
    <script>
        $(document).ready(function(){
            $('.modal').on('click', '#update-faq', function(e){
                e.preventDefault();

                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });

                $.ajax({
                    type: 'post',
                    url: '{{url_for("edit_faq")}}',
                    data: $('#edit-faq-form').serialize(),
                    success: function (response) {
                        if (response == 'success') {
                            Toast.fire({
                                icon: 'success',
                                title: 'Update FAQ berhasil'
                            });
                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: 'Update FAQ gagal'
                            })
                        }

                    }

                });

                $(this).parents('.modal').modal('hide');
            })
        });
    </script>

    <!-- Delete Faq -->
    <script>
        $(document).ready(function () {
            $('.modal').on('click', '#delete-faq', function () {

                var id_faq = $(this).siblings('#id-faq-delete').val();
                //console.log(id_faq);

                const Toast = Swal.mixin({
                    toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                        toast.addEventListener('mouseenter', Swal.stopTimer)
                        toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                });


                $.ajax({
                    type: 'post',
                    url: '{{url_for("delete_faq")}}',
                    data: { 'id_faq': id_faq },
                    success: function (response) {
                        if (response == 'success') {
                            Toast.fire({
                                icon: 'success',
                                title: 'FAQ berhasil dihapus'
                            });
                            setTimeout(function () {
                                location.reload();
                            }, 3000);
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: 'FAQ gagal dihapus'
                            })
                        }
                    }
                });

                $(this).parents('.modal').modal('hide');

            });
        });
    </script>

    <!-- Sending Email -->
    <script>
        $(document).ready(function () {
            function percentageToDegrees(percentage) {
                return percentage / 100 * 360
            }
            $('#send-email-btn').click(function (e) {
                e.preventDefault();
                var id_template = $('#template').val();
                //console.log(id_template);
                if (id_template !== null || id_template != "") {
                    $.ajax({
                        url: "{{url_for('send')}}",
                        type: 'POST',
                        data: {
                            "id_template": id_template,
                        },
                        success: function (response) {
                            //console.log(response.thread_id);
                            var thread_id = response.thread_id;

                            var source = new EventSource('/progress_send/' + response.thread_id)
                            source.onmessage = function (event) {
                                //console.log(event.data)
                                var data_json = JSON.parse((event.data.replace(/'/g, '"')));
                                //console.log(data_json)
                                $('#send-progress-bar').attr('data-value', data_json['progress'])

                                var value = data_json['progress'];
                                var left = $('#send-progress-bar').find('.progress-left .progress-bar');
                                var right = $('#send-progress-bar').find('.progress-right .progress-bar');

                                $('#send-progress-label').html(''+data_json['progress']+'<small>%</small>');
                                $('#succed-send-label').html(data_json['success_send']);
                                $('#failed-send-label').html(data_json['failed_send']);

                                if (value > 0) {
                                    if (value <= 50) {
                                        right.css('transform', 'rotate(' + percentageToDegrees(value) + 'deg)')
                                    } else {
                                        right.css('transform', 'rotate(180deg)')
                                        left.css('transform', 'rotate(' + percentageToDegrees(value - 50) + 'deg)')
                                    }
                                }

                                if (data_json['progress'] >= 100) {
                                    source.close();

                                }
                            }
                        },
                    })
                }
            });
        });
    </script>

    <!-- Instansi -->
    <script>
        $(document).ready(function(){
            var jenis_pekerjaan = $('#j_pekerjaan').val();
            if (jenis_pekerjaan!= null || jenis_pekerjaan!=""){
                if(jenis_pekerjaan==2){
                    $('#form-grup-instansi').show();
                } else {
                    $('#form-grup-instansi').hide();
                }
            } else{
                $('#form-grup-instansi').hide();
            }

            $('#j_pekerjaan').change(function(){
                var j_pekerjaan = $('#j_pekerjaan').val();
                if (j_pekerjaan!= null || j_pekerjaan!=""){
                    if(j_pekerjaan==2){
                        $('#form-grup-instansi').show();
                    } else{
                        $('#form-grup-instansi').hide();
                    }
                } 
            });
        });

        $(document).ready(function(){
            var jenis_pekerjaan = $('.modal').find('#j_pekerjaan').val();
            if (jenis_pekerjaan!= null || jenis_pekerjaan!=""){
                if(jenis_pekerjaan==2){
                    $('.modal').find('#form-grup-instansi').show();
                } else {
                    $('.modal').find('#form-grup-instansi').hide();
                }
            } else{
                $('.modal').find('#form-grup-instansi').hide();
            }

            $('.modal').on('change', '#j_pekerjaan',function(){
                var j_pekerjaan = $(this).parents('.modal').find('#j_pekerjaan').val();
                
                if (j_pekerjaan!= null || j_pekerjaan!=""){
                    if(j_pekerjaan==2){
                        $(this).parents('.modal').find('#form-grup-instansi').show();
                    } else{
                        $(this).parents('.modal').find('#form-grup-instansi').hide();
                    }
                } 
            }); 
        })
    </script>

</body>

</html>